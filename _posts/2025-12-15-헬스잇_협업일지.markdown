---
layout: post
title:  "Healtheat 이미지 인식 프로젝트 - 협업일지 7"
date:   2025-12-15 00:10:22 +0900
categories: Healtheat_Vision
---

# 12월 15일 협업일지

날짜: 2024-12-15
이름: 안호성
팀명: 4팀

## 오늘 맡은 역할 및 작업 내용

오늘은 이미지 생성 기반 증강(Image Augmentation) 가능성을 탐색하는 데 집중했다.
특히 알약 인식 문제에 Stable Diffusion 계열 생성 모델을 어떻게 안전하게 활용할 수 있을지를 고민하며,
기존 YOLO 중심 증강 기법과의 차이점·한계를 비교 분석했다.

1. 이미지 생성 기반 증강 방향성 탐색

- 문제 인식
    - Stable Diffusion을 그대로 사용해 이미지를 생성할 경우
    - 알약 자체가 새로 생성, 변형될 위험이 큼
    - 이는 알약 인식 과제에서 다음 문제를 일으킬 수 있음
        - class semantics 왜곡
        - 실제 존재하지 않는 pill 생성
        - 기존 annotation 무효화

- 따라서 단순 생성 기반 증강은 YOLO augmentation보다 훨씬 위험하다고 판단

2. Diffusion 모델 학습 및 조사

- 이미지 생성 모델을 “새 객체 생성”이 아닌 배경 다양화(background variation) 용도로 제한해 쓰는 방안 탐색
- Diffusion 모델의 기본 개념 학습:
    - noise -> denoise 구조
    - inpainting / outpainting 개념
    - 조건부 생성 방식(prompt, mask 기반 생성)
- 결론적으로:
    - 알약은 그대로 유지
    - 배경만 생성적으로 변경하는 방식이 가장 안전하다는 가설 수립

3. SAM + Background Inpainting 전략 도출

- 기존 실험 경험(SAM segmentation)을 바탕으로 다음 전략을 도출:
    - SAM으로 알약 영역 정확히 분리(mask 생성)
    - 알약 영역은 고정
    - 나머지 배경 영역만 diffusion inpainting으로 재생성
- 이를 통해 다음의 안전한 생성 기반 증강 파이프라인을 구상
    - 알약 class semantics 유지
    - 배경 다양성 확보
    - annotation 재사용 가능

4. 개발 착수

- 위 전략을 바탕으로:
    - SAM 기반 mask 생성
    - Stable Diffusion inpainting 구조
    - 기존 YOLO annotation과의 결합을 목표로 한 개발에 착수

## 오늘 작업 현황

오늘은 본격적인 코드 구현보다는 설계, 방향성 정립에 집중한 날이었다.
Stable Diffusion을 무작정 쓰는 것이 아니라,
**“어디까지 써야 안전한가”**를 명확히 정의했다는 점에서 의미 있는 진전이 있었다.

## 오늘 협업 중 제안하거나 피드백한 내용

- 팀원들에게:
    - 생성 모델을 증강에 쓸 때의 위험성(특히 객체 자체 생성 문제)을 공유
    - YOLO augmentation이 왜 안전한 baseline인지 설명

- Diffusion 기반 증강은:
    - object augmentation이 아니라
    - background augmentation으로 한정해야 한다는 의견 제시

## 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점

- 알약 인식 과제에서 데이터 증강의 핵심은 “다양성”보다 정합성 유지
- Stable Diffusion은 매우 강력하지만 제어 없이 사용하면 annotation 신뢰성을 붕괴시킬 수 있음
- 따라서 SAM + inpainting 조합은 생성 모델을 “위험한 도구”에서 “통제 가능한 도구”로 바꿔주는 핵심 전략임을 인지

## 일정 지연이나 협업 중 어려웠던 점

- Diffusion 모델은 학습 곡선이 가파르고 개념 이해에 시간이 필요했음
- 바로 성능 개선으로 이어지는 작업이 아니라 단기적 산출물이 부족한 하루였음

## 오늘 발표 준비나 커뮤니케이션에서 기여한 부분

- 이미지 생성 기반 증강의 위험성과 한계를 팀원에게 공유
- “왜 알약을 생성하면 안 되는지”, “배경만 생성해야 하는 이유”를 중심으로 방향성을 설명함

## 내일 목표 / 할 일

- SAM 기반 알약 mask 자동 생성 코드 작성
- Stable Diffusion inpainting 파이프라인 초안 구현
- YOLO annotation을 유지한 상태에서의 증강 실험 설계