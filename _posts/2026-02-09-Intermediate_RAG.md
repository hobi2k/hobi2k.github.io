---
layout: post
title:  "입찰/공고 분석 AI - 협업일지 2026-02-09"
date:   2026-02-09 00:10:22 +0900
categories: Intermediate_RAG
---

# 2월 9일 협업일지

날짜: 2026-02-09  
이름: 안호성  
팀명: 3팀

## 오늘 맡은 역할 및 작업 내용

오늘 팀회의에서는 **코드 복잡도 축소**를 최우선으로,  
베이스라인이 **김나영 팀원의 LangChain 기반 구조**로 결정되었다.  
나는 이 베이스라인에 **TTS + SQL 기억/피드백 기능**을 얹는 역할을 맡았다.

1. 베이스라인 전략 결정 (LangGraph -> LangChain)

- 배경
    - 기존 LangGraph 기반 구조는
      분기/상태 관리가 복잡해짐
    - 기능 추가 속도가 떨어지고 디버깅 비용이 증가
- 결정
    - 김나영 팀원의 **LangChain 기반 베이스라인**으로 전환
    - 핵심은 "단순하고 안정적인 구조" 유지
- 효과
    - RAG 파이프라인이 명료해짐
    - 기능 추가(TTS, SQL 저장)를 더 빠르게 적용 가능

2. TTS 워커 구조 도입 (지연 최소화 + 자동 재생)

- 목표
    - 음성 생성 지연을 줄이고
    - 사용자에게 "자동 재생"이 되도록 만들기
- 선택 이유
    - TTS 합성을 메인 흐름에서 처리하면
      응답 출력이 늦어짐
    - 별도의 워커로 분리해
      **텍스트 출력과 음성 합성을 병렬**로 돌리는 구조가 필요
- 구현 개요(구조/로직 중심)
    - 메인 스레드는 **텍스트 출력과 사용자 입력 처리**에 집중
    - 음성 합성은 **백그라운드 워커**가 담당
    - 메인 -> 워커 사이 통신은 **FIFO 큐(Queue)**로 전달
        - 문장 단위 텍스트를 큐에 적재
        - 워커는 큐에서 **먼저 들어온 항목부터 순서대로** 처리
    - 워커는 합성된 wav를 저장하고
      **가장 최신 파일 경로**를 UI로 전달(다시 재생용)

- FIFO 큐를 사용한 이유
    - 텍스트 출력 순서와 **음성 출력 순서를 일치**시키기 위함
    - 큐가 비동기 합성 요청을 **안전하게 직렬화**해
      중복 재생/순서 꼬임을 줄임

- 워커 동작 로직
    1) 큐에서 텍스트를 하나 꺼냄
    2) TTS 합성 실행 (ONNX 추론)
    3) 결과 wav 저장 및 재생
    4) 다음 큐 항목 반복 처리

- 실패/보호 로직
    - 큐가 비어있을 때는 대기 상태로 유지
    - 합성 실패 시 해당 항목만 스킵하고 다음 항목 처리
- 결과
    - 텍스트 출력과 음성 생성이 분리되어 지연이 감소
    - 자동 재생 신뢰도가 개선됨

3. SQL 스키마 단순화

- 목표
    - 메모리 저장 구조를 단순화해 유지보수성을 높임
- 변경 내용
    - **대화 기록 및 피드백 테이블**만 유지
    - 불필요한 세션/부가 테이블 제거
- 저장 항목
    - 피드백 기록: id, question, answer, rating, created_at
- 효과
    - 스키마가 단순해져
      저장/조회 로직이 명확해짐

## 오늘 작업 현황

- 베이스라인을 LangChain 구조로 확정
- TTS 워커 도입으로 지연 감소/자동 재생 확립
- SQL 스키마 단순화 완료

## 오늘 협업 중 제안하거나 피드백한 내용

- 작업 현황 공유

## 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점

- LangGraph 구조는 확장성은 크지만
  작은 팀에서는 유지 부담이 너무 크다
- TTS는 메인 흐름과 분리할수록
  체감 지연이 확실히 줄어든다
- SQL 스키마는 "필요한 것만 남기는 것"이
  안정성과 속도 모두에 유리했다

## 일정 지연이나 협업 중 어려웠던 점

- LangChain 베이스라인으로 변경하면서
  일부 기존 로직을 재이식해야 했음

## 오늘 발표 준비나 커뮤니케이션에서 기여한 부분

- TTS 워커 구조를 문서/코드로 공유
- SQL 스키마 단순화 이유를 정리해 공유

## 내일 목표 / 할 일

- TTS 워커 안정화
- SQL 저장 데이터 검증/조회 루틴 정리
- 발표 자료 준비
