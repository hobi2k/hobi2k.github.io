---
layout: post
title:  "허깅페이스 에이전트 코스 - What is LangGraph?"
date:   2025-01-9 00:10:22 +0900
categories: Huggingface_agent
---

# What is LangGraph?

## LangGraph란 무엇인가?

LangGraph는 **LLM을 통합한 애플리케이션의 제어 흐름(control flow)**을 관리하기 위해 설계된 프레임워크이다.  
단순히 LLM을 호출하는 데 그치지 않고, **애플리케이션 전체의 실행 흐름을 구조적으로 정의**하는 것을 목표로 한다.

핵심 목적은 다음과 같다.

- LLM이 포함된 애플리케이션의 실행 단계를 명시적으로 관리
- 각 단계 간 전이 조건을 명확히 정의
- 예측 가능하고 재현 가능한 동작 보장

## LangGraph는 LangChain과 무엇이 다른가?

LangChain은 다음과 같은 역할에 강점이 있다.

- LLM 호출을 위한 표준 인터페이스
- Retriever, Tool, Prompt, Chain 등의 구성 요소 제공
- 모델 및 외부 리소스와의 연결 추상화

LangGraph는 이와 달리,

- **애플리케이션의 실행 흐름 자체를 관리**하는 데 초점이 맞춰져 있다
- LangChain의 구성 요소를 사용할 수도 있고, 사용하지 않아도 된다
- 두 패키지는 독립적이지만, 실제로는 함께 사용하는 경우가 가장 많다

정리하면,

> LangChain이 “무엇을 호출할 것인가”에 가깝다면,  
> LangGraph는 “어떤 순서와 조건으로 실행할 것인가”에 가깝다.

## 언제 LangGraph를 사용해야 하는가?

### Control vs Freedom

AI 애플리케이션을 설계할 때 항상 마주치는 트레이드오프는 **Control(제어)**과 **Freedom(자율성)**이다.

- **Freedom**
  - LLM에게 높은 자율성을 부여
  - 예상하지 못한 문제에도 유연하게 대응 가능
  - 대신, 동작이 예측 불가능해질 수 있음

- **Control**
  - 실행 흐름과 결과를 예측 가능하게 유지
  - 가드레일과 정책을 명확히 적용 가능
  - 대신, 설계 비용이 증가

예를 들어, 코드 에이전트(smolagents 계열)는 매우 자유롭다.
- 한 단계에서 여러 툴을 호출
- 스스로 툴을 생성
- 높은 유연성

그러나 이러한 자유도는 **통제 불가능성과 디버깅 난이도**로 이어질 수 있다.

LangGraph는 이 스펙트럼의 반대편에 위치한다.  
즉, **자율성보다는 제어가 중요한 경우**에 최적화된 프레임워크다.

## LangGraph가 특히 유용한 상황

LangGraph는 다음과 같은 시나리오에서 강점을 가진다.

- 멀티 스텝 추론 과정이 명확히 정의되어야 하는 경우
- 단계 간 상태(state)를 유지해야 하는 애플리케이션
- 결정적 로직과 AI 추론을 함께 사용하는 시스템
- Human-in-the-loop(중간 개입)가 필요한 워크플로우
- 여러 컴포넌트가 협업하는 복잡한 에이전트 구조

핵심 아이디어는 다음과 같다.

> 사람이 먼저 “이 단계의 결과에 따라 다음에 무엇을 할지”를 설계하고,  
> 그 흐름을 LLM이 따르도록 만드는 것

이 경우 LangGraph는 매우 적합한 선택이 된다.

## LangGraph는 어떻게 동작하는가?

LangGraph의 핵심은 **유향 그래프(directed graph)** 구조이다.

- **Node**
  - 하나의 처리 단계
  - 예: LLM 호출, 툴 실행, 판단 로직

- **Edge**
  - 노드 간 전이 규칙
  - 조건부 분기 포함 가능

- **State**
  - 사용자 정의 상태 객체
  - 노드 간 공유되며 지속적으로 갱신됨
  - 다음 노드를 선택할 때 기준이 되는 정보

즉, “현재 상태를 보고 다음에 실행할 노드를 결정”하는 구조다.

## 왜 그냥 Python if-else로 안 되는가?

물론, 이 모든 것은 일반적인 Python 코드(if/else, 함수 호출)로도 구현할 수 있다.  
LangGraph는 **불가능한 것을 가능하게 만드는 도구는 아니다**.

그러나 LangGraph는 다음과 같은 이점을 제공한다.

- 상태 관리에 대한 표준화된 추상화
- 실행 흐름 시각화(Graph)
- 로깅 및 트레이싱 지원
- Human-in-the-loop 내장 구조
- 복잡한 워크플로우를 더 읽기 쉬운 형태로 표현

즉,

> LangGraph는 “새로운 기능”이 아니라  
> “복잡한 LLM 시스템을 더 안전하고 유지보수 가능하게 만드는 구조”를 제공한다.

## 정리

- LangGraph는 LLM 애플리케이션의 **제어 흐름을 설계하기 위한 프레임워크**
- LangChain과 역할이 다르며, 함께 사용할 때 가장 강력함
- 자유보다 **예측 가능성과 제어**가 중요한 시스템에 적합
- 복잡한 에이전트 및 프로덕션 환경에서 특히 강점

> **LangGraph는 LLM을 즉흥적으로 쓰는 도구가 아니라,  
> LLM을 포함한 시스템을 “설계”하기 위한 프레임워크다.**


참고자료
Huggingface, agents course, https://huggingface.co/learn