---
layout: post
title:  "Healtheat 이미지 인식 프로젝트 - 협업일지 8"
date:   2025-12-16 00:10:22 +0900
categories: Healtheat_Vision
---

# 12월 16일 협업일지

날짜: 2024-12-16
이름: 안호성
팀명: 4팀

## 오늘 맡은 역할 및 작업 내용

오늘은 전날 설계했던 Diffusion + SAM 기반 이미지 증강 파이프라인을 실제로 완성하고,
증강 실험을 유연하게 반복할 수 있도록 설정(Config) 중심 구조로 개선했다.

1. Diffusion + SAM 기반 증강 파이프라인 완성

- 최종 파이프라인 흐름
    - 입력 이미지 로드
    - SAM을 이용해 알약 영역 segmentation(mask) 생성
    - 알약 영역은 고정
    - 배경 영역만 Stable Diffusion Inpainting으로 재생성

- 결과
    - 알약 형태 및 클래스 의미 보존
    - 배경만 다양화하여 안전한 데이터 증강 가능
    - 기존 COCO annotation 그대로 재사용 가능

전날 정의한 **알약은 절대 생성, 변형하지 않는다**는 원칙을 코드 레벨에서 구현했다.

2. aug_config 기반 증강 제어 구조 확장

- 증강 실험의 생산성을 높이기 위해 aug_config.py 중심의 설정 기반 구조로 리팩토링
- aug_config에서 조절 가능하도록 확장한 항목
    - 이미지당 증강 생성 개수
    - Stable Diffusion 프롬프트(prompt)
    - 네거티브 프롬프트(negative prompt)
    - 증강 이미지 저장 경로 및 규칙
- 효과
    - 코드 수정 없이 설정 값 변경만으로 실험 가능
    - 팀원 간 동일한 증강 실험 재현 가능
    - 다양한 증강 전략 비교 실험에 용이한 구조 확보

3. 증강 파이프라인 검증
- SAM mask 품질 확인
- Inpainting 결과에서 알약 왜곡 여부 점검
- 증강 이미지와 기존 annotation 간 정합성 확인
- end-to-end로 입력 이미지 -> 증강 이미지 -> YOLO 학습 가능 데이터 흐름이 정상 작동함을 검증

## 오늘 작업 현황

Diffusion + SAM 기반 이미지 증강 파이프라인이 실질적으로 완성되었다.
단순 실험 수준이 아니라,

- 재사용 가능하고
- 설정 기반으로 확장 가능하며
- 실제 학습 파이프라인에 바로 투입 가능한

실전용 증강 시스템을 구축했다는 점에서 의미가 크다.

## 오늘 협업 중 제안하거나 피드백한 내용

- 팀원들에게
    - YOLO 기본 증강과 Diffusion 증강의 역할 차이를 설명
    - Diffusion 증강은 YOLO 증강의 대체가 아니라 보완 전략임을 공유

- 증강 전략 제안
    - YOLO 기본 증강 -> 안정적인 baseline 확보
    - Diffusion + SAM 증강 -> 배경 다양성 확장

## 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점

- 생성 모델을 증강에 사용할 때 핵심은 “모델 성능”이 아니라 제어 가능성
- SAM 없이 Diffusion만 사용할 경우 알약 왜곡 위험이 매우 큼
- aug_config 기반 설계는
    - 실험 반복 비용을 크게 줄이고
    - 협업 및 재현성을 크게 향상시킴

## 일정 지연이나 협업 중 어려웠던 점

- Diffusion inpainting 속도가 느려 대량 증강 시 시간 비용이 큼

## 오늘 발표 준비나 커뮤니케이션에서 기여한 부분

- Diffusion + SAM 증강 파이프라인 완성 사실 공유
- 다음 내용을 중심으로 설명
    - 왜 이 방식이 안전한지
    - 어디까지 자동화되었는지
    - 어떤 요소를 설정으로 제어할 수 있는지

## 내일 목표 / 할 일

- 증강 파이프라인 문서화
- 팀원 코드 통합 후 리팩토링