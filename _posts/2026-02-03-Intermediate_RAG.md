---
layout: post
title:  "입찰/공고 분석 AI - 협업일지 2026-02-03"
date:   2026-02-03 00:10:22 +0900
categories: Intermediate_RAG
---

# 2월 3일 협업일지

날짜: 2026-02-03  
이름: 안호성  
팀명: 3팀

## 오늘 맡은 역할 및 작업 내용

오늘은 **베이스라인을 완성**하고, 그 결과를 문서화한 날이다.  
단순히 "코드가 작동한다"가 아니라, **왜 이런 구조인지 설명 가능한 상태**로 만드는 것이 목표였다.

1. 베이스라인 파이프라인 완성

- 문서 파싱 -> 청킹 -> 인덱싱 -> 검색 -> 생성까지 전 과정을 연결
- 질문 입력에 대한 응답이 실제로 생성되는지 확인
- 이 시점의 그래프는 **실질적으로 선형 흐름**이었다
  - 노드 분기/라우팅은 아직 도입 전
  - 단일 경로에서 “질문 -> 검색 -> 생성”으로만 처리

2. 청킹 방식 변경(Recursive 적용)

- 기존의 **고정 길이 방식에서 Recursive 청킹으로 전환**했다
- 기존 고정 길이는 다음 문제가 있었다
  - 문장 경계가 깨짐
  - 표/목차/제목이 분해되어 의미 손실
  - 검색 결과가 "문서 맥락" 대신 "단편 문장"으로만 남는 문제
- Recursive 청킹을 택한 이유
  - 문단/문장/구두점 등 "자연 경계"를 최대한 보존
  - 이후 검색 단계에서 "맥락 유지"에 유리
  - 생성 모델이 답변을 만들 때 문서 단위 맥락을 더 잘 사용 가능
- 이 변경은 **검색 품질 개선**을 위한 구조적 전환이었다

3. 파싱/청킹 보존

- 베이스라인 재현성을 확보하기 위해 **백업 파일 유지**
- 이후 실험에서 "청킹 변경 전/후" 비교가 가능하도록 기록

4. LangGraph 아키텍처 문서화

- LangGraph 기반의 RAG 흐름을 문서로 정리
- 노드가 어떤 책임을 갖는지를 명시했다
- 다음 내용을 문서에 정리
  - 입력 질문 -> 분석 노드 -> 검색 노드 -> 생성 노드 흐름
  - 후속 확장(멀티턴/전략 분기)을 위한 설계 의도
- 이 문서화는 팀 내 공유를 위한 기준점이 됨
- 코드만 있는 상태보다 “설계 근거가 남는 구조”를 목표로 함

5. OpenAI 파이프라인 구축

- OpenAI 기반 파이프라인을 로컬 vLLM 파이프라인과 분리
- 코드 상에서 **OpenAIRAGPipeline** 경로를 독립적으로 유지
- 이유는 명확함
  - 실험 비교를 위해 동일 입력을 다른 모델에 투입 가능

6. 리트리버 전략

- 2/3 기준 검색 전략은 **LLM 질문 분류 결과에 따라 single/multi가 결정**되었다.
- 다만 이 분기는 LangGraph 노드 분기로 구현된 것이 아니라,
  **analyze 결과를 바탕으로 retrieval 단계 내부에서 전략이 갈렸다.**
- single 전략
  - 기본 similarity 검색 사용
  - 단일 문서 응답을 목표로 문서 범위를 좁힘
- multi 전략
  - RRF 조합: similarity + MMR
  - 다문서 비교가 필요한 경우에만 사용
- 리랭크
  - multi 결과에 대해 리랭크를 적용해 상위 문서를 보정

## 오늘 작업 현황

- 베이스라인이 실제 질문에 응답을 반환
- 청킹 방식은 **Recursive 기준으로 전환됨**
- LangGraph 구조가 문서화되어 공유 가능한 상태가 됨
- OpenAI 파이프라인도 독립 실행 가능 상태로 완성됨

## 오늘 협업 중 제안하거나 피드백한 내용

- 단순 길이 청킹은 베이스라인 확보에는 유리했으나,
  실제 검색/응답 품질에는 한계가 있으므로 **Recursive 전환이 필요**
- LangGraph 구조를 문서로 남기지 않으면,
  "왜 이 구조인가?"를 팀이 이해할 수 없다는 점을 바탕으로 문서 공유
- OpenAI 파이프라인을 **완전히 분리된 실행 경로**로 유지

## 오늘 분석/실험 중 얻은 인사이트나 발견한 문제점

- 청킹은 검색 품질에 즉각적인 영향을 준다
- Recursive 청킹은 단순 길이보다 문맥 보존에 유리하다
- 베이스라인이 돌아가더라도, 구조적 문서화가 없으면 협업 확장이 어렵다
- LangGraph는 단순 "코드"가 아니라
  **아키텍처 의도를 보여주는 문서화가 필요**하다

## 일정 지연이나 협업 중 어려웠던 점

- 베이스라인을 완성한 직후에는
  "문서화까지 해야 하나"에 대한 부담이 있었다
- 그러나 문서화가 없으면 이후 논의가 불가능하다는 점에서
  오늘은 문서화까지 포함해 진행

## 오늘 발표 준비나 커뮤니케이션에서 기여한 부분

- LangGraph 구조 문서를 팀에 공유
- "청킹 전환의 이유"와 "OpenAI 파이프라인 분리 의도"를 설명

## 내일 목표 / 할 일

- 분기 구조를 실제 운용 흐름에 더 맞게 조정
- 리트리버 전략 개선
- 파싱 전략 개선
